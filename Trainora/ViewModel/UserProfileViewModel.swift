////  UserProfileViewModel.swift//  Trainora////  Created by user266021 on 5/3/25.//import Foundationimport Combinefinal class UserProfileViewModel: ObservableObject {    @Published var profile: UserProfile = UserProfile(        id: UUID(),        fullName: "",        email: "",        mobileNumber: "",        password: "",        dateOfBirth: Date(),        weight: 0,        height: 0,        profileImageName: "",        experience: .beginner,        gender: .male,        age: 0    )    @Published var loaded = false    var age: Int {        Calendar.current.dateComponents([.year], from: profile.dateOfBirth, to: Date()).year ?? 0    }    private let service: UserProfileServiceProtocol    private var cancellables = Set<AnyCancellable>()    init(service: UserProfileServiceProtocol) {        self.service = service        loadProfile()    }    func loadProfile() {        service.getUserProfile()            .receive(on: DispatchQueue.main)            .sink { [weak self] loadedProfile in                if let loaded = loadedProfile {                    self?.profile = loaded                }                self?.loaded = true            }            .store(in: &cancellables)    }    func save() {        profile.age = age        service.updateUserProfile(profile)    }}