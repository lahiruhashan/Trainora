////  ExerciseDetailPopupView.swift//  Trainora////  Created by user266021 on 5/1/25.//import SwiftUIstruct ExerciseDetailPopupView: View {    @ObservedObject var viewModel: ExerciseDetailViewModel    @Environment(\.dismiss) private var dismiss    var isYouTubeVideo: Bool {        viewModel.exercise.videoURL?.host?.contains("youtube.com") == true    }    var body: some View {        NavigationStack {            VStack(spacing: 0) {                ScrollView {                    VStack(alignment: .leading, spacing: 16) {                        if let videoID = extractYouTubeID(                            from: viewModel.exercise.videoURL?.absoluteString                        ), isYouTubeVideo {                            YouTubePlayerView(videoID: videoID)                                .frame(height: 240)                                .cornerRadius(12)                        } else {                            LocalVideoPlayerView(                                fileName: "demoWorkout",                                fileExtension: "mp4"                            )                        }                        Text(viewModel.exercise.title)                            .font(.title2.bold())                        Text(viewModel.exercise.description)                            .font(.body)                        HStack {                            Label(viewModel.formattedDuration, systemImage: "clock")                            Spacer()                            Label(viewModel.formattedCalories, systemImage: "flame")                            Spacer()                            Label(viewModel.formattedReps, systemImage: "bolt.horizontal")                        }                        .font(.subheadline)                        .foregroundColor(.secondary)                    }                    .padding()                }                // Bottom Close Button                Button(action: {                    dismiss()                }) {                    Text("Close")                        .font(.headline)                        .frame(maxWidth: .infinity)                        .padding()                        .background(Color.blue)                        .foregroundColor(.white)                        .cornerRadius(12)                        .padding(.horizontal, 40)                        .padding(.vertical, 12)                }            }            .navigationTitle("Exercise Details")            .navigationBarTitleDisplayMode(.inline)        }    }    func extractYouTubeID(from url: String?) -> String? {        guard let url = url else { return nil }        if let regex = try? NSRegularExpression(            pattern: "v=([\\w-]{11})",            options: []        ),        let match = regex.firstMatch(            in: url,            range: NSRange(location: 0, length: url.utf16.count)        ),        let range = Range(match.range(at: 1), in: url) {            return String(url[range])        }        return nil    }}