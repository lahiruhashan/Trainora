////  SettingsView.swift//  Trainora////  Created by user266021 on 5/4/25.//import SwiftUIstruct SettingsView: View {    @EnvironmentObject var colorSchemeManager: ColorSchemeManager    @EnvironmentObject var localizationManager: LocalizationManager    @State private var preferences: UserPreferencesProtocol = UserPreferences()    @State private var showChangePassword = false    let availableLanguages = ["en": "English", "si": "සිංහල", "ta": "தமிழ்"]    var body: some View {        NavigationStack {            Form {                Section(                    header: Text(                        "Appearance".localized(using: localizationManager)                    )                ) {                    Picker(                        "Theme".localized(using: localizationManager),                        selection: Binding(                            get: { colorSchemeManager.selectedTheme },                            set: {                                colorSchemeManager.selectedTheme = $0                                preferences.selectedTheme = $0                            }                        )                    ) {                        ForEach(AppTheme.allCases, id: \.self) { theme in                            Text(theme.rawValue.capitalized)                        }                    }                    .pickerStyle(SegmentedPickerStyle())                }                Section(                    header: Text(                        "Account".localized(using: localizationManager)                    )                ) {                    NavigationLink(destination: ChangePasswordView()) {                        Text(                            "Change Password".localized(                                using: localizationManager                            )                        )                    }                    Picker(                        "Language".localized(using: localizationManager),                        selection: Binding(                            get: { localizationManager.selectedLanguage },                            set: {                                localizationManager.selectedLanguage = $0                                preferences.selectedLanguage = $0                            }                        )                    ) {                        ForEach(availableLanguages.keys.sorted(), id: \.self) {                            code in                            Text(availableLanguages[code]!).tag(code)                        }                    }                }                Section(                    header: Text(                        "Notifications".localized(using: localizationManager)                    )                ) {                    Toggle(                        "Enable Notifications".localized(                            using: localizationManager                        ),                        isOn: Binding(                            get: { preferences.notificationsEnabled },                            set: { newValue in                                preferences.notificationsEnabled = newValue                                NotificationManager.shared.updateReminder(                                    enabled: newValue,                                    time: preferences.reminderTime                                )                            }                        )                    )                    DatePicker(                        "Reminder Time".localized(using: localizationManager),                        selection: Binding(                            get: { preferences.reminderTime },                            set: { newTime in                                preferences.reminderTime = newTime                                if preferences.notificationsEnabled {                                    NotificationManager.shared.updateReminder(                                        enabled: true,                                        time: newTime                                    )                                }                            }                        ),                        displayedComponents: .hourAndMinute                    )                }                Section {                    Button("Sign Out".localized(using: localizationManager)) {                        // Add logout logic                    }                    .foregroundColor(.red)                }            }            .navigationTitle("Settings".localized(using: localizationManager))        }    }}